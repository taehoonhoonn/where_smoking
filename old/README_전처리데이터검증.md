# ì „ì²˜ë¦¬ëœ í¡ì—°êµ¬ì—­ ë°ì´í„° ê²€ì¦ ì‹œìŠ¤í…œ

## ğŸ“‹ ê°œìš”
ì „ì²˜ë¦¬ëœ í¡ì—°êµ¬ì—­ ì£¼ì†Œ ë°ì´í„°ë¥¼ Postcodify APIë¡œ ê²€ì¦í•˜ì—¬ ìš°í¸ë²ˆí˜¸ë¥¼ ì¶”ê°€í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ“ íŒŒì¼ êµ¬ì¡°
```
scripts/
â”œâ”€â”€ validate_preprocessed_data.py    # ë©”ì¸ ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ preview_and_test.py              # ë¯¸ë¦¬ë³´ê¸° ë° í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ README_ì „ì²˜ë¦¬ë°ì´í„°ê²€ì¦.md       # ì´ ê°€ì´ë“œ

data/
â””â”€â”€ total_smoking_place.csv          # ì „ì²˜ë¦¬ëœ ì…ë ¥ íŒŒì¼ (ì‚¬ìš©ì ì œê³µ)
```

## ğŸ“Š ì…ë ¥ íŒŒì¼ í˜•ì‹

### í•„ìˆ˜ íŒŒì¼: `data/total_smoking_place.csv`

**í•„ìˆ˜ ì»¬ëŸ¼:**
- `ì£¼ì†Œ`: ì „ì²˜ë¦¬ëœ ì£¼ì†Œ (ì˜ˆ: "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 152")
- `ì›ë³¸íŒŒì¼ëª…`: ì›ë³¸ CSV íŒŒì¼ëª… (ì˜ˆ: "ì„œìš¸íŠ¹ë³„ì‹œ_ê°•ë‚¨êµ¬_í¡ì—°êµ¬ì—­_20250101.csv")
- `ìš°í¸ë²ˆí˜¸`: ë¹ˆ ì»¬ëŸ¼ (ìë™ìœ¼ë¡œ ìƒì„±ë˜ë©°, ë¹„ì–´ìˆì–´ë„ ë¨)

**ì˜ˆì‹œ:**
```csv
ì£¼ì†Œ,ì›ë³¸íŒŒì¼ëª…,ìš°í¸ë²ˆí˜¸
ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 152,ì„œìš¸íŠ¹ë³„ì‹œ_ê°•ë‚¨êµ¬_í¡ì—°êµ¬ì—­_20250101.csv,
ê²½ê¸°ë„ ì„±ë‚¨ì‹œ ë¶„ë‹¹êµ¬ íŒêµì—­ë¡œ 166,ê²½ê¸°ë„_ì„±ë‚¨ì‹œ_í¡ì—°êµ¬ì—­_20250101.csv,
ë¶€ì‚°ê´‘ì—­ì‹œ í•´ìš´ëŒ€êµ¬ ì„¼í…€ì¤‘ì•™ë¡œ 79,ë¶€ì‚°ê´‘ì—­ì‹œ_í•´ìš´ëŒ€êµ¬_í¡ì—°êµ¬ì—­_20250101.csv,
```

## ğŸš€ ì‚¬ìš© ë°©ë²•

### 1ë‹¨ê³„: ë¯¸ë¦¬ë³´ê¸° ë° í…ŒìŠ¤íŠ¸
```bash
cd scripts
python3 preview_and_test.py
```

**í™•ì¸ ë‚´ìš©:**
- íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ ë° êµ¬ì¡°
- ë°ì´í„° í’ˆì§ˆ (NULLê°’, ë¹ˆ ë¬¸ìì—´ ë“±)
- API ì—°ê²° í…ŒìŠ¤íŠ¸
- ìƒ˜í”Œ 3ê°œ ì£¼ì†Œ ê²€ì¦ í…ŒìŠ¤íŠ¸

### 2ë‹¨ê³„: ì „ì²´ ê²€ì¦ ì‹¤í–‰
```bash
cd scripts
python3 validate_preprocessed_data.py
```

## ğŸ“¤ ì¶œë ¥ íŒŒì¼

### 1. ê²€ì¦ëœ CSV íŒŒì¼
**íŒŒì¼ëª…:** `validated_total_smoking_place_YYYYMMDD_HHMMSS.csv`

**ì»¬ëŸ¼ êµ¬ì¡°:**
- `ì£¼ì†Œ`: ì›ë³¸ ì£¼ì†Œ
- `ì›ë³¸íŒŒì¼ëª…`: ì›ë³¸ CSV íŒŒì¼ëª…
- `ìš°í¸ë²ˆí˜¸`: APIì—ì„œ ë°›ì€ ìš°í¸ë²ˆí˜¸ (ì˜ˆ: "06164")
- `í‘œì¤€í™”ì£¼ì†Œ`: APIì—ì„œ ë°›ì€ í‘œì¤€í™”ëœ ì£¼ì†Œ
- `ì§€ë²ˆì£¼ì†Œ`: APIì—ì„œ ë°›ì€ ì§€ë²ˆ ì£¼ì†Œ
- `ê²€ì¦ìƒíƒœ`: "ì„±ê³µ" ë˜ëŠ” "ì‹¤íŒ¨"
- `ê²€ì¦ì¼ì‹œ`: ê²€ì¦ ìˆ˜í–‰ ì¼ì‹œ

### 2. ìƒì„¸ ë¦¬í¬íŠ¸ JSON íŒŒì¼
**íŒŒì¼ëª…:** `validation_report_YYYYMMDD_HHMMSS.json`

**êµ¬ì¡°:**
```json
{
  "summary": {
    "total_count": 1000,
    "success_count": 850,
    "fail_count": 150,
    "success_rate": 85.0,
    "start_time": "2025-01-01T10:00:00",
    "end_time": "2025-01-01T10:30:00",
    "processing_time": "0:30:00"
  },
  "detailed_results": [
    {
      "index": 0,
      "original_address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 152",
      "original_file": "ì„œìš¸íŠ¹ë³„ì‹œ_ê°•ë‚¨êµ¬_í¡ì—°êµ¬ì—­.csv",
      "status": "success",
      "postcode": "06164",
      "validated_address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 152",
      "validation_time": "2025-01-01 10:00:01"
    }
  ]
}
```

## â±ï¸ ì²˜ë¦¬ ì‹œê°„ ë° ì„±ëŠ¥

### ì˜ˆìƒ ì²˜ë¦¬ ì‹œê°„
- **API í˜¸ì¶œ ê°„ê²©**: 0.2ì´ˆ (API ì œí•œ ê³ ë ¤)
- **1,000ê°œ ì£¼ì†Œ**: ì•½ 3-4ë¶„
- **5,000ê°œ ì£¼ì†Œ**: ì•½ 17-20ë¶„
- **10,000ê°œ ì£¼ì†Œ**: ì•½ 35-40ë¶„

### ì§„í–‰ìƒí™© ëª¨ë‹ˆí„°ë§
- 10ê°œ ì²˜ë¦¬ë§ˆë‹¤ ì§„í–‰ë¥  ë° ì„±ê³µë¥  í‘œì‹œ
- ì‹¤ì‹œê°„ ì„±ê³µ/ì‹¤íŒ¨ ìƒíƒœ ì¶œë ¥
- ì˜ˆìƒ ì™„ë£Œ ì‹œê°„ í‘œì‹œ

## ğŸ”§ ë¬¸ì œ í•´ê²°

### íŒŒì¼ ê´€ë ¨ ì˜¤ë¥˜
```
âŒ íŒŒì¼ ì—†ìŒ: data/total_smoking_place.csv
```
**í•´ê²°ë°©ë²•:** `data/total_smoking_place.csv` íŒŒì¼ì„ ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— ë°°ì¹˜

### ì¸ì½”ë”© ì˜¤ë¥˜
```
âŒ ëª¨ë“  ì¸ì½”ë”© ì‹œë„ ì‹¤íŒ¨
```
**í•´ê²°ë°©ë²•:** CSV íŒŒì¼ì„ UTF-8 ì¸ì½”ë”©ìœ¼ë¡œ ì €ì¥í•˜ê±°ë‚˜ Excelì—ì„œ "CSV UTF-8"ë¡œ ì €ì¥

### API ì—°ê²° ì˜¤ë¥˜
```
âŒ API í˜¸ì¶œ ì‹¤íŒ¨: HTTPSConnectionPool
```
**í•´ê²°ë°©ë²•:**
- ì¸í„°ë„· ì—°ê²° í™•ì¸
- ë°©í™”ë²½ ì„¤ì • í™•ì¸
- ì ì‹œ í›„ ì¬ì‹œë„

### ì»¬ëŸ¼ ëˆ„ë½ ì˜¤ë¥˜
```
âŒ í•„ìˆ˜ ì»¬ëŸ¼ ëˆ„ë½: ['ì£¼ì†Œ']
```
**í•´ê²°ë°©ë²•:** CSV íŒŒì¼ì— í•„ìˆ˜ ì»¬ëŸ¼('ì£¼ì†Œ', 'ì›ë³¸íŒŒì¼ëª…') ì¶”ê°€

## ğŸ“Š ê²€ì¦ ê²°ê³¼ í•´ì„

### ì„±ê³µë¥  ê¸°ì¤€
- **90% ì´ìƒ**: ë§¤ìš° ìš°ìˆ˜ (ë°ì´í„° í’ˆì§ˆ ë†’ìŒ)
- **80-90%**: ìš°ìˆ˜ (ì¼ë°˜ì ì¸ ìˆ˜ì¤€)
- **70-80%**: ë³´í†µ (ì¼ë¶€ ì£¼ì†Œ í˜•ì‹ ë¬¸ì œ)
- **70% ë¯¸ë§Œ**: ì£¼ì˜ (ë°ì´í„° ì „ì²˜ë¦¬ ì¬ê²€í†  í•„ìš”)

### ì£¼ìš” ì‹¤íŒ¨ ì›ì¸
1. **ì§€ë²ˆì£¼ì†Œ**: ë„ë¡œëª…ì£¼ì†Œë¡œ ë³€í™˜ í•„ìš”
2. **ë¶ˆì™„ì „í•œ ì£¼ì†Œ**: ì‹œ/êµ¬/ë™ ì •ë³´ ëˆ„ë½
3. **íŠ¹ìˆ˜ë¬¸ì**: ì£¼ì†Œì— í¬í•¨ëœ ê´„í˜¸, í•˜ì´í”ˆ ë“±
4. **ê±´ë¬¼ëª…ë§Œ**: ë„ë¡œëª…ì´ë‚˜ ì§€ë²ˆ ì •ë³´ ë¶€ì¡±

## ğŸ”„ ì¬ì²˜ë¦¬ ë°©ë²•

### ì‹¤íŒ¨í•œ ì£¼ì†Œ ì¬ì²˜ë¦¬
1. `validation_report_*.json`ì—ì„œ ì‹¤íŒ¨í•œ ì£¼ì†Œ í™•ì¸
2. ì‹¤íŒ¨ ì›ì¸ì— ë”°ë¼ ì£¼ì†Œ ìˆ˜ì •
3. ìˆ˜ì •ëœ ì£¼ì†Œë¡œ CSV íŒŒì¼ ì—…ë°ì´íŠ¸
4. ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ ì¬ì‹¤í–‰

### ë¶€ë¶„ ì¬ì²˜ë¦¬
íŠ¹ì • ì£¼ì†Œë§Œ ì¬ê²€ì¦í•˜ë ¤ë©´ ë³„ë„ CSV íŒŒì¼ë¡œ ë¶„ë¦¬í•˜ì—¬ ì²˜ë¦¬

## ğŸ“ ì§€ì›

### ë¡œê·¸ íŒŒì¼ ìœ„ì¹˜
- ì‹¤í–‰ ì¤‘ ëª¨ë“  ì¶œë ¥ì´ ì½˜ì†”ì— í‘œì‹œë¨
- í•„ìš”ì‹œ ë¦¬ë‹¤ì´ë ‰ì…˜ìœ¼ë¡œ ë¡œê·¸ íŒŒì¼ ì €ì¥:
  ```bash
  python3 validate_preprocessed_data.py > validation.log 2>&1
  ```

### ì„±ëŠ¥ ìµœì í™”
- ëŒ€ìš©ëŸ‰ ë°ì´í„°ì˜ ê²½ìš° ë°°ì¹˜ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ì²˜ë¦¬
- API í˜¸ì¶œ ê°„ê²© ì¡°ì • (í˜„ì¬ 0.2ì´ˆ)
- ë©€í‹°í”„ë¡œì„¸ì‹± ì ìš© (í–¥í›„ ê°œì„  ì˜ˆì •)

## ğŸ“ˆ ì‚¬ìš© ì˜ˆì‹œ

### ì†Œê·œëª¨ í…ŒìŠ¤íŠ¸ (100ê°œ ì£¼ì†Œ)
```bash
# 1. ë¯¸ë¦¬ë³´ê¸°
python3 preview_and_test.py

# 2. ê²€ì¦ ì‹¤í–‰ (ì•½ 20ì´ˆ ì†Œìš”)
python3 validate_preprocessed_data.py
```

### ëŒ€ê·œëª¨ ì²˜ë¦¬ (10,000ê°œ ì£¼ì†Œ)
```bash
# 1. ë¯¸ë¦¬ë³´ê¸°ë¡œ ë°ì´í„° í’ˆì§ˆ í™•ì¸
python3 preview_and_test.py

# 2. ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ (ì•½ 35ë¶„ ì†Œìš”)
nohup python3 validate_preprocessed_data.py > validation.log 2>&1 &

# 3. ì§„í–‰ìƒí™© ëª¨ë‹ˆí„°ë§
tail -f validation.log
```